---
name: refactor-plan
description: 리팩토링 계획 수립 및 영향 분석
---

# 리팩토링 계획

## 1. 현재 코드 분석

리팩토링 대상 코드를 읽고 다음을 파악하세요:

### 구조 분석
- 함수/클래스 책임 (단일 책임 원칙 위반 여부)
- 의존성 (강한 결합도 문제)
- 중복 코드 (DRY 원칙 위반)

### 코드 품질 지표
```bash
# 복잡도 분석 (radon 있는 경우)
radon cc src/ -a || echo "radon not available"

# 유지보수성 지표
radon mi src/ || echo "radon not available"
```

## 2. 리팩토링 목표 정의

다음 중 해당하는 목표를 명확히 하세요:

- [ ] 가독성 개선
- [ ] 성능 최적화
- [ ] 테스트 가능성 향상
- [ ] 확장성 개선
- [ ] 기술 부채 해소

## 3. 영향 범위 분석

```bash
# 함수/클래스 사용처 검색
grep -r "target_function_name" src/ tests/ --include="*.py"
```

### 영향받는 파일 목록
- 직접 사용하는 파일
- 간접 의존성이 있는 파일

### 테스트 커버리지 확인
```bash
python -m pytest tests/ --cov=src --cov-report=term-missing | grep "target_module"
```

## 4. 리팩토링 전략 수립

### 단계별 계획
1. **1단계**: 테스트 추가 (현재 동작 보존)
2. **2단계**: 작은 단위로 리팩토링
3. **3단계**: 각 단계마다 테스트 실행
4. **4단계**: 최종 통합 테스트

### 안전장치
- Git 브랜치 생성: `git checkout -b refactor/description`
- 각 단계마다 커밋
- 테스트 실패 시 롤백

## 5. 리팩토링 계획서 작성

다음 형식으로 정리하세요:

### 📋 리팩토링 대상
```python
# Before (현재 코드 발췌)
```

### 🎯 목표
- 구체적인 개선 목표

### 🔧 변경 계획
```python
# After (예상 코드)
```

### 📊 영향 범위
- 변경 파일: X개
- 영향받는 테스트: Y개
- 예상 소요 시간: Z시간

### ⚠️ 위험 요소
- 잠재적 문제점
- 대응 방안

### ✅ 검증 방법
- 어떻게 리팩토링 성공을 확인할 것인가?
