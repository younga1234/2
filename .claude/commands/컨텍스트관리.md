---
name: 컨텍스트관리
description: 현재 컨텍스트 사용량 확인 및 정리
---

# 컨텍스트 관리

## 1. 현재 컨텍스트 사용량 확인

```bash
# Claude Code 내장 명령어 사용
# (세션 내에서 /context 입력)
```

현재 컨텍스트 사용 현황:
- 총 토큰 예산: 200K
- 사용 중인 토큰 확인
- 주요 토큰 소비 항목 분석

## 2. 컨텍스트 분석

다음 항목을 분석하세요:

### 📊 토큰 배분 현황
- **CLAUDE.md**: ~5K (2.5%)
- **슬래시 커맨드**: ~5K (2.5%)
- **작업 파일**: ~40K (20%)
- **세션 이력**: ~50K (25%)
- **여유 버퍼**: ~95K (50%)

### ⚠️ 토큰 초과 위험 항목
- 너무 많은 파일이 열려 있는가?
- 대화 이력이 과도하게 길어졌는가?
- 불필요한 파일이 컨텍스트에 포함되어 있는가?

## 3. 컨텍스트 최적화 제안

상황에 따라 다음 조치를 제안하세요:

### 🧹 경량 정리 (토큰 사용률 60-80%)
```bash
# 완료된 작업 대화 정리
/clear
```

### 🗜️ 중간 압축 (토큰 사용률 80-90%)
```bash
# 중요한 내용만 요약하여 압축
/compact
```

### 🔄 전체 리셋 (토큰 사용률 90% 이상)
```bash
# 새 세션 시작 권장
# 1. 현재 진행 상황을 별도 파일로 저장
echo "## 진행 상황

### 완료된 작업
- [작업 1]
- [작업 2]

### 진행 중인 작업
- [작업 3]

### 다음 작업
- [작업 4]" > session-progress.md

# 2. 세션 종료
exit

# 3. 새 세션에서 진행 상황 파일 읽기
cat session-progress.md
```

## 4. 컨텍스트 관리 베스트 프랙티스

### ✅ 권장 사항
- **작은 단위로 작업**: 하나의 기능 완료 후 `/clear` 사용
- **에이전트 활용**: 복잡한 작업은 에이전트에 위임하여 메인 세션 컨텍스트 절약
- **정기적 정리**: 2-3시간마다 `/compact` 실행
- **진행 상황 문서화**: 중요한 내용은 마크다운 파일로 저장

### ❌ 피해야 할 사항
- 한 세션에서 너무 많은 파일 읽기
- 불필요한 대화 이력 누적
- 완료된 작업을 계속 컨텍스트에 유지
- `/compact` 없이 장시간 세션 유지

## 5. 자동 컨텍스트 관리

### SessionStart 훅 (자동)
세션 시작 시 자동으로:
- 컨텍스트 사용량 확인
- 이전 세션 정리 상태 점검

### SessionEnd 훅 (자동)
세션 종료 시 자동으로:
- 진행 상황 자동 저장
- 임시 파일 정리
- 다음 세션을 위한 요약 생성

## 6. 결과 보고

다음 형식으로 정리하세요:

### 📊 현재 상태
- **토큰 사용률**: XX%
- **주요 소비 항목**:
  - 작업 파일: XK
  - 대화 이력: XK
  - 기타: XK

### 💡 권장 조치
- [ ] `/clear` 실행 (경량 정리)
- [ ] `/compact` 실행 (압축)
- [ ] 새 세션 시작 (리셋)
- [ ] 에이전트 활용 (위임)

### 📋 다음 작업 전 체크리스트
- [ ] 불필요한 파일 닫기
- [ ] 완료된 작업 정리
- [ ] 중요 내용 문서화
